<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Tangled Oak Shop</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<!-- Header -->
<div class="header">
    <a href="Index.html">
        <img src="views/images/wordsLogo2.png" height="105" width="auto" alt="Tangled Oak Word Logo"/>
    </a>
    <a href="Index.html" class="nav-link">Home</a>
    <a href="Shop.html" class="nav-link">Shop</a>
    <a href="About.html" class="nav-link">About Us</a>
    <a href="ContactUs.html" class="nav-link">Contact Us</a>

    <!-- Search Bar -->
    <form class="search-bar">
        <input type="text" placeholder="Search" id="search-input" />
        <ul id="search-results" class="search-results-list"></ul>
    </form>

    <!-- Cart Icon -->
    <a href="https://the-tangled-oak-craft-collective.square.site/s/cart">
        <img src="views/images/cart.png" height="40" width="auto" alt="Shopping Cart"/>
    </a>
</div>

<!-- Main Shop Layout -->
<main class="shop-container">
    <div class="sidebar">
        <h2>Browse by Category</h2>
        <ul id="categories-list" class="category-list">
            <!-- Categories will be loaded here -->
        </ul>
        <h2>Shop by Vendor</h2>
        <a href="VendorShop.html">Shop All Vendors</a>
        <ul class="vendor-list">
            <li><a href="VendorProfile.html">Bohemian Heart Crafts</a></li>
            <li><a href="VendorProfile.html">Knit with Love by Carol</a></li>
            <li><a href="VendorProfile.html">Peddie Pieces</a></li>
            <li><a href="VendorProfile.html">Candy Dandy Crafts</a></li>
            <li><a href="VendorProfile.html">The Knotty Celt</a></li>
            <li><a href="VendorProfile.html">Mo's Craftworks</a></li>
            <li><a href="VendorProfile.html">A&S Crystals</a></li>
            <li><a href="VendorProfile.html">Tags & Tropics</a></li>
            <li><a href="VendorProfile.html">Ocean Soul Clay</a></li>
            <li><a href="VendorProfile.html">Knits by Marsha Ann</a></li>
            <li><a href="VendorProfile.html">Muddy Paws Raw</a></li>
            <li><a href="VendorProfile.html">Cheese + Stuffs</a></li>
            <li><a href="VendorProfile.html">Soap & Seed</a></li>
            <li><a href="VendorProfile.html">Top to Toe Knits</a></li>
            <li><a href="VendorProfile.html">She Keeps Bees</a></li>
            <li><a href="VendorProfile.html">Cosmically Connected</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <section class="main-content">
        <h1>Shop Our Collection</h1>

        <!-- Sorting & Filtering UI -->
        <div class="filters">
            <label for="sort-select">Sort by:</label>
            <select id="sort-select">
                <option value="newest">Newest</option>
                <option value="oldest">Oldest</option>
                <option value="price-low-high">Price: Low to High</option>
                <option value="price-high-low">Price: High to Low</option>
            </select>
        </div>

        <!-- Product Display -->
        <div id="products-container" class="products-container">Loading products...</div>

        <!-- Pagination Controls -->
        <div id="pagination-controls" class="pagination"></div>
    </section>

</main>
<!-- Footer -->
<footer class="footer">
    <div class="footer-container">
        <div class="footer-section social-media">
            <h2>Follow Us</h2>
            <div class="social-icons">
                <a href="https://www.facebook.com/profile.php?id=61556577491923"><img src="views/images/facebook.png" alt="Facebook"/></a>
                <a href="https://www.instagram.com/tangledoakcraft/"><img src="views/images/instagram.png" alt="Instagram"/></a>
                <a href="https://www.pinterest.com/tangledoakcraft"><img src="views/images/pinterest.png" alt="Pinterest"/></a>
            </div>
        </div>
        <p style="font-size: 8px">&copy; 2024 The Tangled Oak + Craft Collective. All Rights Reserved.</p>
    </div>
</footer>

<!-- JavaScript -->
<script>
    async function fetchCategories() {
        try {
            const response = await fetch('http://localhost:3000/categories');
            if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
            const categories = await response.json();

            const categoriesList = document.getElementById('categories-list');
            categoriesList.innerHTML = '';

            categories.forEach(category => {
                const listItem = document.createElement('li');
                const link = document.createElement('a');
                link.href = `https://the-tangled-oak-craft-collective.square.site/s/categories/${category.id}`;
                link.textContent = category.name;
                listItem.appendChild(link);
                categoriesList.appendChild(listItem);
            });
        } catch (error) {
            console.error('Error fetching categories:', error);
            const categoriesList = document.getElementById('categories-list');
            categoriesList.innerHTML = 'Failed to load categories.';
        }
    }

    document.addEventListener("DOMContentLoaded", () => {
        fetchCategories();
        // Add calls to fetchProducts() and fetchVendors() if these functions are defined
    });
</script>

</body>
</html>
